# AVP规划算法和问题总结
该文档总结百度Apollo AVP2规划算法方案，和项目中遇到和解决的问题。

## AVP规划算法
规划算法分为巡航规划和泊车规划，其中巡航规划又分为巡航纵向规划和巡航横向规划。

### 巡航规划
巡航规划采用横纵向解耦的策略，横向规划输出一条安全的动力学可行的轨迹（位置，姿态，曲率），纵向规划在横向轨迹点的基础上增加速度信息，涉及纵向行车安全和体感等方面。
1. 横向规划：采用Apollo经典Lattice算法，即撒点采样+评价筛选，直观简洁，久经验证  
主要算法是单层lattice，在frenet坐标系通过撒点采样和五次多项式参数化得到一组可行解集，利用轨迹评价函数得到最优的备选轨迹。Apollo规划的前提是必须有光滑的指引线，指引线的获取等内容暂时未涉及，可以参考下面链接中的问答：
[Apollo规划算法问答](https://zhuanlan.zhihu.com/p/69878689).  
巡航阶段横向规划的框图可以参考下面图片
![总体框图](../img/avp_cruise_lateral_planning.png)


2. 纵向规划：复用ANP2高斯伪谱方案



### 泊车规划
泊车规划采用基于双匀速曲线的几何规划算法，利用有限状态机实现揉库动作切换，简单高效省算力；在中高算力平台上可以采用搜索+优化的规控算法，更灵活智能和鲁棒。

## AVP项目问题总结

### 海马AVP项目问题

### 日产AVP项目问题